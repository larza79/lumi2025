<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luminosity Festival Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .priority-btn-group .btn-selected {
            background-color: #4F46E5;
            color: white;
        }
        .add-btn.added {
            background-color: #10B981;
            color: white;
            /* Make it a square to nicely fit the checkmark icon */
            width: 34px; /* Same as height for a square shape */
            height: 34px;
            padding: 0; /* Remove padding to use flex centering */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem; /* rounded-md */
            transition: all 0.2s; /* Smooth transition */
        }
        .add-btn.added:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div id="app" class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-bold text-indigo-600">Luminosity Beach Festival 2025</h1>
            <p class="mt-2 text-lg text-gray-600">Your Personal Concert Planner</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Concert Selection Column -->
            <div class="lg:col-span-2 bg-white p-6 rounded-2xl shadow-lg">
                <h2 class="text-2xl font-semibold mb-4 border-b pb-2">Select Your Concerts</h2>
                <div id="concert-list">
                    <!-- Concerts will be dynamically inserted here -->
                </div>
            </div>

            <!-- Itinerary Column -->
            <div class="lg:col-span-1">
                <div class="sticky top-8 bg-white p-6 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-semibold mb-4 border-b pb-2">Your Itinerary</h2>
                    <div id="itinerary-list" class="space-y-4">
                        <p class="text-gray-500">Your planned concerts will appear here. Add concerts from the left to get started!</p>
                    </div>
                     <button id="clear-plan-btn" class="mt-6 w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow transition-transform transform hover:scale-105 hidden">
                        Clear Plan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const concertData = [
            // Thursday Data
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '12:00', endTime: '13:00', artist: 'Spark & Shade' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '13:00', endTime: '14:00', artist: 'Somna' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '14:00', endTime: '15:00', artist: 'Nitrous Oxide' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '15:00', endTime: '16:00', artist: 'Taylor Torrence' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '16:00', endTime: '17:00', artist: 'Asteroid' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '17:00', endTime: '18:00', artist: 'Ben Gold' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '18:00', endTime: '19:15', artist: 'Jordan Suckley' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '19:15', endTime: '20:30', artist: 'Sneijder' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '20:30', endTime: '21:45', artist: 'Gareth Emery', notes: '(Hard Set)' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Mainstage', startTime: '21:45', endTime: '23:00', artist: 'Mark Sherry' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '12:00', endTime: '13:15', artist: 'Sinful Biz' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '13:15', endTime: '14:30', artist: 'Daniel Skyver' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '14:30', endTime: '15:45', artist: 'Ronski Speed' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '15:45', endTime: '17:00', artist: 'Craig Connelly' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '17:00', endTime: '18:00', artist: 'Genix' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '18:00', endTime: '19:00', artist: 'John O\'Callaghan' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '19:00', endTime: '20:00', artist: 'Artento Divini' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '20:00', endTime: '21:00', artist: 'David Rust' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '21:00', endTime: '22:00', artist: 'Metta & Glyde' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Sunset Beach', startTime: '22:00', endTime: '23:00', artist: 'Will Jones' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Beachclub Bernies', startTime: '13:00', endTime: '14:30', artist: 'Temple One' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Beachclub Bernies', startTime: '14:30', endTime: '15:45', artist: 'Ahmed Romel' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Beachclub Bernies', startTime: '15:45', endTime: '17:00', artist: 'Daniel Kandi' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Beachclub Bernies', startTime: '17:00', endTime: '18:15', artist: 'Ciaran McAuley' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Beachclub Bernies', startTime: '18:15', endTime: '19:30', artist: 'ReOrder' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Beachclub Bernies', startTime: '19:30', endTime: '20:45', artist: 'Stoneface & Tonks', notes: 'pres. Mirage (vinyl set)' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Beachclub Bernies', startTime: '20:45', endTime: '22:00', artist: 'The Noble Six' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'Beachclub Bernies', startTime: '22:00', endTime: '23:00', artist: 'Signum' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'This is Trance!', startTime: '12:00', endTime: '13:15', artist: 'Fuenka' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'This is Trance!', startTime: '13:15', endTime: '14:30', artist: 'Digital Drift' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'This is Trance!', startTime: '14:30', endTime: '15:45', artist: '00.db' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'This is Trance!', startTime: '15:45', endTime: '16:45', artist: 'Darren Porter' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'This is Trance!', startTime: '16:45', endTime: '18:00', artist: 'Renegade System' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'This is Trance!', startTime: '18:00', endTime: '19:15', artist: 'Kinetica' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'This is Trance!', startTime: '19:15', endTime: '20:30', artist: 'Scot Project' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'This is Trance!', startTime: '20:30', endTime: '21:45', artist: 'Shugz' },
            { day: 'Thursday', date: '26-Jun-2025', stage: 'This is Trance!', startTime: '21:45', endTime: '23:00', artist: 'Edele Andaya' },
            
            // Friday Data
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '12:00', endTime: '13:00', artist: 'Dylhen' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '13:00', endTime: '14:00', artist: 'Leena Punks' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '14:00', endTime: '15:00', artist: 'Nifra' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '15:00', endTime: '16:00', artist: 'Ruben de Ronde' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '16:00', endTime: '17:00', artist: 'Amber Broos' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '17:00', endTime: '18:00', artist: 'Matt Fax' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '18:00', endTime: '19:15', artist: 'Space 92' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '19:15', endTime: '20:30', artist: 'Ferry Corsten' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '20:30', endTime: '21:45', artist: 'Ben Nicky', notes: 'pres. Emotional Havoc' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Mainstage', startTime: '21:45', endTime: '23:00', artist: 'Maddix' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '12:00', endTime: '13:00', artist: 'Simon Gregory' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '13:00', endTime: '14:00', artist: 'Paul Thomas' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '14:00', endTime: '15:00', artist: 'Factor B' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '15:00', endTime: '16:00', artist: 'Alex M.O.R.P.H.', notes: '(Producerset)' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '16:00', endTime: '17:00', artist: 'Aly & Fila' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '17:00', endTime: '18:00', artist: 'Sander van Doorn' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '18:00', endTime: '19:00', artist: 'Paul van Dyk' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '19:00', endTime: '20:00', artist: 'Greg Downey' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '20:00', endTime: '21:00', artist: 'John Askew' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Sunset Beach', startTime: '21:00', endTime: '23:00', artist: 'John Askew B2B Simon Patterson' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '12:00', endTime: '13:00', artist: 'Claus Backslash' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '13:00', endTime: '14:00', artist: 'Dennis Sheperd' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '14:00', endTime: '15:00', artist: 'Wanders pres. COLLIDE1' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '15:00', endTime: '16:00', artist: 'Daxson' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '16:00', endTime: '17:00', artist: 'Misja Helsloot' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '17:00', endTime: '18:15', artist: 'Talla 2XLC pres. RRAW!', notes: '(Criminal)' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '18:15', endTime: '19:15', artist: 'Johan Gielen' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '19:15', endTime: '20:30', artist: 'Richard Durand' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '20:30', endTime: '22:00', artist: 'Sneijder' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'Beachclub Bernies (In Trance We Trust)', startTime: '22:00', endTime: '23:00', artist: 'RAM' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'This is Trance!', startTime: '14:00', endTime: '15:15', artist: 'The Digital Blonde' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'This is Trance!', startTime: '15:15', endTime: '16:15', artist: 'Allen Watts' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'This is Trance!', startTime: '16:15', endTime: '17:15', artist: 'Chris Schweizer' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'This is Trance!', startTime: '17:15', endTime: '18:15', artist: 'Billy Gillies' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'This is Trance!', startTime: '18:15', endTime: '19:15', artist: 'Liam Wilson' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'This is Trance!', startTime: '19:15', endTime: '20:15', artist: 'BK' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'This is Trance!', startTime: '20:15', endTime: '21:15', artist: 'Mark Sherry' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'This is Trance!', startTime: '21:15', endTime: '22:15', artist: 'David Forbes' },
            { day: 'Friday', date: '27-Jun-2025', stage: 'This is Trance!', startTime: '22:15', endTime: '23:00', artist: 'Indecent Noise' },

            // Saturday Data
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Mainstage', startTime: '12:00', endTime: '13:15', artist: 'Mir Omar' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Mainstage', startTime: '13:15', endTime: '14:30', artist: 'Estiva' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Mainstage', startTime: '14:30', endTime: '15:45', artist: 'Orjan Nilsen' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Mainstage', startTime: '15:45', endTime: '17:00', artist: 'Cosmic Gate' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Mainstage', startTime: '17:00', endTime: '18:30', artist: 'Markus Schulz' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Mainstage', startTime: '18:30', endTime: '20:00', artist: 'Gareth Emery' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Mainstage', startTime: '20:00', endTime: '21:30', artist: 'Paul van Dyk' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Mainstage', startTime: '21:30', endTime: '23:00', artist: 'Bryan Kearney' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Sunset Beach Classics', startTime: '12:00', endTime: '13:00', artist: 'The Blizzard' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Sunset Beach Classics', startTime: '13:00', endTime: '14:15', artist: 'Rank 1' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Sunset Beach Classics', startTime: '14:15', endTime: '15:30', artist: 'Push' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Sunset Beach Classics', startTime: '15:30', endTime: '16:45', artist: 'Lange', notes: 'pres. Retrospect' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Sunset Beach Classics', startTime: '16:45', endTime: '18:00', artist: 'Ruben de Ronde' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Sunset Beach Classics', startTime: '18:00', endTime: '19:15', artist: 'Super8 & Tab' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Sunset Beach Classics', startTime: '19:15', endTime: '20:30', artist: 'Giuseppe Ottaviani' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Sunset Beach Classics', startTime: '20:30', endTime: '21:30', artist: 'Marco V' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Sunset Beach Classics', startTime: '21:30', endTime: '23:00', artist: 'Jordan Suckley' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Beachclub Bernies (Hardcopy pres.)', startTime: '12:00', endTime: '13:15', artist: 'Tasso' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Beachclub Bernies (Hardcopy pres.)', startTime: '13:15', endTime: '14:30', artist: 'Y-Sawa' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Beachclub Bernies (Hardcopy pres.)', startTime: '14:30', endTime: '15:45', artist: 'Cor Fijneman' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Beachclub Bernies (Hardcopy pres.)', startTime: '15:45', endTime: '17:00', artist: 'Paul Oakenfold' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Beachclub Bernies (Hardcopy pres.)', startTime: '17:00', endTime: '18:15', artist: 'M.I.K.E. Push' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Beachclub Bernies (Hardcopy pres.)', startTime: '18:15', endTime: '19:30', artist: 'Marcel Woods' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Beachclub Bernies (Hardcopy pres.)', startTime: '19:30', endTime: '20:20', artist: 'David Forbes' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Beachclub Bernies (Hardcopy pres.)', startTime: '20:20', endTime: '21:40', artist: 'Mark Sherry', notes: 'pres. Public Domain' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'Beachclub Bernies (Hardcopy pres.)', startTime: '21:40', endTime: '23:00', artist: 'Scot Project' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'This is Trance!', startTime: '12:00', endTime: '13:15', artist: 'Odette Hayas' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'This is Trance!', startTime: '13:15', endTime: '14:30', artist: 'Sunny Lax' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'This is Trance!', startTime: '14:30', endTime: '15:30', artist: 'Richard Durand' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'This is Trance!', startTime: '15:30', endTime: '17:40', artist: 'Daniel Skyver' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'This is Trance!', startTime: '17:40', endTime: '18:20', artist: 'Alex Di Stefano' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'This is Trance!', startTime: '18:20', endTime: '20:00', artist: 'DNA' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'This is Trance!', startTime: '20:00', endTime: '21:40', artist: 'Jordan Bartels' },
            { day: 'Saturday', date: '28-Jun-2025', stage: 'This is Trance!', startTime: '21:40', endTime: '23:00', artist: 'Renegade System' },
            
            // Sunday Data
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Mainstage', startTime: '12:00', endTime: '13:15', artist: 'Alex Wright' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Mainstage', startTime: '13:15', endTime: '14:30', artist: 'Christina Novelli' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Mainstage', startTime: '14:30', endTime: '15:45', artist: 'The Thrillseekers' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Mainstage', startTime: '15:45', endTime: '17:00', artist: 'Craig Connelly' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Mainstage', startTime: '17:00', endTime: '18:15', artist: 'Ben Gold' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Mainstage', startTime: '18:15', endTime: '19:45', artist: 'Giuseppe Ottaviani B2B Nifra' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Mainstage', startTime: '19:45', endTime: '21:15', artist: 'Aly & Fila' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Mainstage', startTime: '21:15', endTime: '23:00', artist: 'Ferry Corsten', notes: '(BF25 Closing Show)' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Sunset Powers', startTime: '12:00', endTime: '13:00', artist: 'Jamie Walker' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Sunset Powers', startTime: '13:00', endTime: '14:00', artist: 'Talla 2XLC' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Sunset Powers', startTime: '14:00', endTime: '15:00', artist: 'David Rust' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Sunset Powers', startTime: '15:00', endTime: '16:00', artist: 'Shugz' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Sunset Powers', startTime: '16:00', endTime: '17:00', artist: 'VE/RA' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Sunset Powers', startTime: '17:00', endTime: '18:20', artist: 'Scot Project' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Sunset Powers', startTime: '18:20', endTime: '19:40', artist: 'Will Atkinson' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Sunset Powers', startTime: '19:40', endTime: '21:00', artist: 'The Rocketman' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Sunset Powers', startTime: '21:00', endTime: '22:00', artist: 'John O\'Callaghan B2B Bryan Kearney', notes: '(Another But Sockets Set)' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '12:00', endTime: '14:00', artist: 'Danilo Ercole', notes: '(Progressive Classics)' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '14:00', endTime: '15:00', artist: 'Sam Mitcham', notes: '(Vinyl Set)' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '15:00', endTime: '16:00', artist: 'Signum' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '16:00', endTime: '17:00', artist: 'Oliver Lieb' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '17:00', endTime: '18:00', artist: 'Airwave' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '18:00', endTime: '19:00', artist: 'The Noble Six' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '19:00', endTime: '20:00', artist: 'Stoneface & Tonks' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '20:00', endTime: '21:00', artist: 'Fred Baker' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '21:00', endTime: '22:00', artist: 'The Thrillseekers' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'Beachclub Bernies (Trance Classics)', startTime: '22:00', endTime: '23:00', artist: 'Factor B', notes: '(Back to the Future set)' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'This is Trance!', startTime: '13:00', endTime: '14:15', artist: 'Maywave' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'This is Trance!', startTime: '14:15', endTime: '15:30', artist: 'Robert Nickson' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'This is Trance!', startTime: '15:30', endTime: '16:45', artist: 'Solarstone' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'This is Trance!', startTime: '16:45', endTime: '18:00', artist: 'Enigma State' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'This is Trance!', startTime: '18:00', endTime: '19:15', artist: 'Asteroid' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'This is Trance!', startTime: '19:15', endTime: '20:30', artist: 'Tasso' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'This is Trance!', startTime: '20:30', endTime: '21:45', artist: 'Key4050' },
            { day: 'Sunday', date: '29-Jun-2025', stage: 'This is Trance!', startTime: '21:45', endTime: '23:00', artist: 'Nikolauss' },
        ];


        document.addEventListener('DOMContentLoaded', () => {
            const concertListContainer = document.getElementById('concert-list');
            const itineraryListContainer = document.getElementById('itinerary-list');
            const clearPlanBtn = document.getElementById('clear-plan-btn');

            let userSelections = [];

            // --- LocalStorage Functions ---
            const saveSelections = () => {
                localStorage.setItem('festivalPlannerSelections', JSON.stringify(userSelections));
            };

            const loadSelections = () => {
                const savedData = localStorage.getItem('festivalPlannerSelections');
                if (savedData) {
                    userSelections = JSON.parse(savedData);
                }
            };

            // --- Helper Functions ---
            const timeToMinutes = (time) => {
                const [hours, minutes] = time.split(':').map(Number);
                return hours * 60 + minutes;
            };

            const getDuration = (start, end) => {
                return timeToMinutes(end) - timeToMinutes(start);
            };

            // Group concerts by day
            const concertsByDay = concertData.reduce((acc, concert) => {
                (acc[concert.day] = acc[concert.day] || []).push(concert);
                return acc;
            }, {});

            // --- Render Functions ---

            // Render the main concert list
            const renderConcertList = () => {
                concertListContainer.innerHTML = '';
                const checkMarkSVG = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>`;

                Object.keys(concertsByDay).forEach(day => {
                    const dayHeader = document.createElement('h3');
                    dayHeader.className = 'text-xl font-bold mt-6 mb-3 bg-gray-200 p-2 rounded-md';
                    dayHeader.textContent = `${day}, ${concertsByDay[day][0].date}`;
                    concertListContainer.appendChild(dayHeader);

                    const concerts = concertsByDay[day];
                    concerts.forEach((concert, index) => {
                        const concertId = `${day.replace(/\s+/g, '-')}-${index}`;
                        concert.id = concertId;
                        
                        const concertEl = document.createElement('div');
                        concertEl.className = 'concert-item flex flex-col sm:flex-row justify-between items-start sm:items-center p-3 border-b hover:bg-gray-50 rounded-lg';
                        concertEl.dataset.id = concertId;

                        const duration = getDuration(concert.startTime, concert.endTime);
                        const existingSelection = userSelections.find(s => s.id === concert.id);
                        const isAdded = !!existingSelection;

                        let buttonContent = isAdded ? checkMarkSVG : 'Add';
                        let buttonClasses = isAdded 
                            ? 'add-btn added' 
                            : 'add-btn bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-1 px-4 rounded-md transition-transform transform hover:scale-105';

                        concertEl.innerHTML = `
                            <div class="flex-grow mb-2 sm:mb-0">
                                <p class="font-semibold text-lg">${concert.artist} ${concert.notes ? `<span class="text-sm text-gray-500 font-normal">${concert.notes}</span>` : ''}</p>
                                <p class="text-sm text-gray-600">${concert.startTime} - ${concert.endTime} (${duration} mins)</p>
                                <p class="text-sm text-indigo-500 font-medium">${concert.stage}</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="priority-btn-group" data-concert-id="${concertId}">
                                    <button class="priority-btn text-xs font-semibold py-1 px-3 rounded-l-md border border-gray-300 bg-white" data-priority="1">P1</button>
                                    <button class="priority-btn text-xs font-semibold py-1 px-3 border-t border-b border-gray-300 bg-white" data-priority="2">P2</button>
                                    <button class="priority-btn text-xs font-semibold py-1 px-3 rounded-r-md border border-gray-300 bg-white" data-priority="3">P3</button>
                                </div>
                                <button class="${buttonClasses}" data-concert-id="${concertId}">${buttonContent}</button>
                            </div>
                        `;
                        concertListContainer.appendChild(concertEl);
                        
                        if (isAdded) {
                           const priorityButton = concertEl.querySelector(`.priority-btn[data-priority="${existingSelection.priority}"]`);
                           if (priorityButton) {
                               priorityButton.classList.add('btn-selected');
                           }
                        }
                    });
                });
            };
            
            // Main logic to update the itinerary
            const updateItinerary = () => {
                if (userSelections.length === 0) {
                    itineraryListContainer.innerHTML = '<p class="text-gray-500">Your planned concerts will appear here. Add concerts from the left to get started!</p>';
                    clearPlanBtn.classList.add('hidden');
                    return;
                }
                
                clearPlanBtn.classList.remove('hidden');
                
                const sortedSelections = [...userSelections].sort((a, b) => {
                    if (a.priority !== b.priority) return a.priority - b.priority;
                    return timeToMinutes(a.startTime) - timeToMinutes(b.startTime);
                });

                const finalPlan = [];
                const rejectedPlan = [];

                sortedSelections.forEach(currentConcert => {
                    let hasConflict = false;
                    const currentStart = timeToMinutes(currentConcert.startTime);
                    const currentEnd = timeToMinutes(currentConcert.endTime);

                    for (const plannedConcert of finalPlan) {
                        const plannedStart = timeToMinutes(plannedConcert.startTime);
                        const plannedEnd = timeToMinutes(plannedConcert.endTime);

                        const overlap = Math.max(0, Math.min(currentEnd, plannedEnd) - Math.max(currentStart, plannedStart));
                        if (overlap > 15) {
                            hasConflict = true;
                            break;
                        }
                    }

                    if (!hasConflict) {
                        finalPlan.push(currentConcert);
                    } else {
                        rejectedPlan.push({concert: currentConcert, reason: 'Conflict'});
                    }
                });
                
                renderItineraryUI(finalPlan, rejectedPlan);
            };

            // Render the final itinerary UI
            const renderItineraryUI = (plan, rejected) => {
                itineraryListContainer.innerHTML = '';
                
                plan.sort((a, b) => timeToMinutes(a.startTime) - timeToMinutes(b.startTime));

                if(plan.length === 0 && rejected.length > 0) {
                    itineraryListContainer.innerHTML = '<p class="text-gray-500 font-semibold">All your selections have conflicts.</p>';
                } else if (plan.length === 0) {
                     itineraryListContainer.innerHTML = '<p class="text-gray-500">Add concerts to see your plan.</p>';
                }

                plan.forEach(concert => {
                    const duration = getDuration(concert.startTime, concert.endTime);
                    const item = document.createElement('div');
                    item.className = 'p-3 bg-green-100 border-l-4 border-green-500 rounded-r-lg';
                    item.innerHTML = `
                        <p class="font-bold text-green-800">${concert.artist} (P${concert.priority})</p>
                        <p class="text-sm text-green-700">${concert.day} | ${concert.startTime} - ${concert.endTime} (${duration} mins)</p>
                        <p class="text-sm text-green-700 font-medium">@ ${concert.stage}</p>
                    `;
                    itineraryListContainer.appendChild(item);
                });

                if (rejected.length > 0) {
                    const rejectedHeader = document.createElement('h4');
                    rejectedHeader.className = 'text-lg font-semibold mt-6 mb-2 text-red-600';
                    rejectedHeader.textContent = 'Skipped due to conflicts';
                    itineraryListContainer.appendChild(rejectedHeader);

                    rejected.forEach(item => {
                         const duration = getDuration(item.concert.startTime, item.concert.endTime);
                         const rejectedItem = document.createElement('div');
                         rejectedItem.className = 'p-3 bg-red-100 border-l-4 border-red-500 rounded-r-lg opacity-70';
                         rejectedItem.innerHTML = `
                            <p class="font-bold text-red-800">${item.concert.artist} (P${item.concert.priority})</p>
                            <p class="text-sm text-red-700">${item.concert.day} | ${item.concert.startTime} - ${item.concert.endTime} (${duration} mins)</p>
                            <p class="text-sm text-red-700 font-medium">@ ${item.concert.stage}</p>
                         `;
                         itineraryListContainer.appendChild(rejectedItem);
                    });
                }
            };
            
            // --- Event Handlers ---
            const handleAddClick = (e) => {
                const button = e.target.closest('.add-btn');
                if (!button) return;

                const concertId = button.dataset.concertId;
                const concert = concertData.find(c => c.id === concertId);
                const concertElement = button.closest('.concert-item');
                const priorityGroup = concertElement.querySelector('.priority-btn-group');
                const selectedPriorityBtn = priorityGroup.querySelector('.btn-selected');
                
                const existingSelectionIndex = userSelections.findIndex(s => s.id === concertId);
                const checkMarkSVG = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>`;

                if (existingSelectionIndex > -1) {
                    userSelections.splice(existingSelectionIndex, 1);
                    button.innerHTML = 'Add';
                    button.className = 'add-btn bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-1 px-4 rounded-md transition-transform transform hover:scale-105';
                } else {
                    if (!selectedPriorityBtn) {
                        alert("Please select a priority (P1, P2, or P3) before adding the concert.");
                        return;
                    }
                    const priority = parseInt(selectedPriorityBtn.dataset.priority, 10);
                    userSelections.push({ ...concert, priority });
                    button.innerHTML = checkMarkSVG;
                    button.className = 'add-btn added';
                }
                
                updateItinerary();
                saveSelections();
            };

            const handlePriorityClick = (e) => {
                if (!e.target.classList.contains('priority-btn')) return;

                const parentGroup = e.target.parentElement;
                parentGroup.querySelectorAll('.priority-btn').forEach(btn => btn.classList.remove('btn-selected'));
                e.target.classList.add('btn-selected');
            };

            const clearPlan = () => {
                userSelections = [];
                saveSelections();
                renderConcertList();
                updateItinerary();
            }

            // --- Initialisation ---
            loadSelections();
            renderConcertList();
            updateItinerary();

            // --- Event Listeners ---
            concertListContainer.addEventListener('click', handleAddClick);
            concertListContainer.addEventListener('click', handlePriorityClick);
            clearPlanBtn.addEventListener('click', clearPlan);
        });

    </script>
</body>
</html>
